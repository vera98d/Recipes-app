(()=>{var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequiredc51;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,i.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},e.parcelRequiredc51=i);var r,a=class{constructor(e,t){this.ref=document.getElementById("ingredientsList"),this.store=e,this.onSubmit=t,e.onChange((e=>{this.render(e)}))}addNewListElement(e){const t=document.createElement("li");t.innerText=e,t.id=e,t.classList.add("listElement"),this.list.appendChild(t);const n=document.createElement("button");n.setAttribute("type","button"),t.appendChild(n);const i=document.createElement("i");n.appendChild(i),n.classList.add("removeButton"),i.classList.add("fas"),i.classList.add("fa-backspace");n.addEventListener("click",(()=>{this.store.dispatch((t=>t={...t,currentRecipe:{...t.currentRecipe,ingredients:t.currentRecipe.ingredients.filter((t=>t!==e))}}))}))}renderInput(e){const t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("placeholder","Type ingredient and press enter"),this.ref.appendChild(t),t.classList.add("addIngredient");t.addEventListener("keyup",(n=>{if("Enter"===n.key){const n=t.value;if(t.value="",e.currentRecipe.ingredients.includes(n))return;this.addNewListElement(t.value),this.store.dispatch((e=>(e.currentRecipe.ingredients.push(n),e)))}}))}renderList(e){this.list=document.createElement("ul"),this.ref.appendChild(this.list),e.forEach((e=>{this.addNewListElement(e)}))}renderSubmitButton(e){const t=document.createElement("button");t.setAttribute("type","button"),t.innerText="Submit",t.classList.add("submitButton"),t.disabled=0===e.currentRecipe.ingredients.length||!e.token,this.ref.appendChild(t),t.addEventListener("click",(()=>{this.onSubmit(e.currentRecipe.ingredients)}))}render(e){this.ref.innerHTML="",this.renderInput(e),this.renderList(e.currentRecipe.ingredients),this.renderSubmitButton(e)}};i.register("jh5O7",(function(e,t){var n,i,r,a,s;n=e.exports,i="getBundleURL",r=()=>s,a=e=>s=e,Object.defineProperty(n,i,{get:r,set:a,enumerable:!0,configurable:!0});var c={};function l(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}s=function(e){var t=c[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return l(e[2])}return"/"}(),c[e]=t),t}})),r=i("jh5O7").getBundleURL("gDgPj")+"logo.0481ae2c.webp";var s=class{constructor(){this.ref=document.querySelector("header")}render(e){const t=document.createElement("img");t.id="logo",t.src=new URL(r),t.alt="Logo",this.ref.appendChild(t);const n=document.createElement("h1");n.id="titleText",n.textContent="Choose the ingredients and create a recipe",this.ref.appendChild(n)}};var c=class{constructor(){this.ref=document.querySelector("header")}render(){const e=document.createElement("p");e.textContent=(new Date).toLocaleTimeString(),e.classList.add("timer"),this.ref.appendChild(e),setInterval((()=>{e.textContent=(new Date).toLocaleTimeString()}),1e3)}};var l;l=i("jh5O7").getBundleURL("gDgPj")+"cheese.6e82f45d.jpg";var d;d=i("jh5O7").getBundleURL("gDgPj")+"ham.c935385d.jpg";var g;g=i("jh5O7").getBundleURL("gDgPj")+"eggs.f40cbf6b.jpg";var o;o=i("jh5O7").getBundleURL("gDgPj")+"butter.cf0addc8.jpg";var h;h=i("jh5O7").getBundleURL("gDgPj")+"apple.405778b5.jpg";var p;p=i("jh5O7").getBundleURL("gDgPj")+"milk.993ba511.jpg";var u;u=i("jh5O7").getBundleURL("gDgPj")+"tomatoes.62d28351.jpg";var R;R=i("jh5O7").getBundleURL("gDgPj")+"peppers.fdd5fead.jpg";var m;m=i("jh5O7").getBundleURL("gDgPj")+"cucumbers.23e4bac8.jpg";var j;j=i("jh5O7").getBundleURL("gDgPj")+"broccoli.4c7e045e.jpg";var L;L=i("jh5O7").getBundleURL("gDgPj")+"onion.ab884308.jpg";var f;f=i("jh5O7").getBundleURL("gDgPj")+"bacon.d8fa5414.jpg";var S;S=i("jh5O7").getBundleURL("gDgPj")+"cream-cheese.623e6568.jpg";var H;H=i("jh5O7").getBundleURL("gDgPj")+"sausage.e1a10e50.jpg";var v;v=i("jh5O7").getBundleURL("gDgPj")+"chicken.3ac8721b.jpg";var U;U=i("jh5O7").getBundleURL("gDgPj")+"lemons.d3842b79.jpg";var b;b=i("jh5O7").getBundleURL("gDgPj")+"ground-meat.f691266a.jpg";var _;_=i("jh5O7").getBundleURL("gDgPj")+"beef.355e0d04.jpg";var w;w=i("jh5O7").getBundleURL("gDgPj")+"potatoes.2fe8e395.jpg";var E;E=i("jh5O7").getBundleURL("gDgPj")+"strawberries.69519106.jpg";var y;y=i("jh5O7").getBundleURL("gDgPj")+"lettuce.43a65bed.jpg";var A;A=i("jh5O7").getBundleURL("gDgPj")+"pasta.2692088d.jpg";var B;B=i("jh5O7").getBundleURL("gDgPj")+"juice.a4a15d88.jpg";var P;P=i("jh5O7").getBundleURL("gDgPj")+"bread.303ec6b4.jpg";var O;O=i("jh5O7").getBundleURL("gDgPj")+"salami.48e0adef.jpg";var D;D=i("jh5O7").getBundleURL("gDgPj")+"olives.50fd0a44.jpg";var F;F=i("jh5O7").getBundleURL("gDgPj")+"greek-feta-cheese.8d7bbe41.jpg";var C;C=i("jh5O7").getBundleURL("gDgPj")+"mushroom.f8e9f53e.jpg";var x;x=i("jh5O7").getBundleURL("gDgPj")+"tuna.bb6fa052.jpg";var k;k=i("jh5O7").getBundleURL("gDgPj")+"spinach.fc054c9e.jpg";var T;T=i("jh5O7").getBundleURL("gDgPj")+"asparagus.ca6d3c02.jpg";var I;I=i("jh5O7").getBundleURL("gDgPj")+"raspberries.8c55327d.jpg";var M;M=i("jh5O7").getBundleURL("gDgPj")+"blueberries.1c772338.jpg";var q;q=i("jh5O7").getBundleURL("gDgPj")+"avocado.fff7848e.jpg";var $;$=i("jh5O7").getBundleURL("gDgPj")+"olive-oil.894ae0c7.jpg";var K;K=i("jh5O7").getBundleURL("gDgPj")+"flour.d52a0507.jpg";var z;z=i("jh5O7").getBundleURL("gDgPj")+"corn.31d41578.jpg";var N;N=i("jh5O7").getBundleURL("gDgPj")+"chocolate.ad8589a1.jpg";var G;G=i("jh5O7").getBundleURL("gDgPj")+"banana.788f103f.jpg";var J;J=i("jh5O7").getBundleURL("gDgPj")+"carrot.6fc4ce1b.jpg";var W;W=i("jh5O7").getBundleURL("gDgPj")+"chives.4e4d4fe8.jpg";var Y;Y=i("jh5O7").getBundleURL("gDgPj")+"peas.a9268dbd.jpg";var Z;Z=i("jh5O7").getBundleURL("gDgPj")+"water.82cb9002.jpg";var Q;Q=i("jh5O7").getBundleURL("gDgPj")+"broad-beans.a943ac62.jpg";var V;V=i("jh5O7").getBundleURL("gDgPj")+"orange.2ec3961d.jpg";var X;X=i("jh5O7").getBundleURL("gDgPj")+"garlic.7c77291b.jpg";var ee;ee=i("jh5O7").getBundleURL("gDgPj")+"peanut-butter.9a81f23a.jpg";var te;te=i("jh5O7").getBundleURL("gDgPj")+"hazelnuts.78e0774c.jpg";var ne;ne=i("jh5O7").getBundleURL("gDgPj")+"walnuts.9737ce8f.jpg";var ie;ie=i("jh5O7").getBundleURL("gDgPj")+"buckwheat.8ff0f008.jpg";var re;re=i("jh5O7").getBundleURL("gDgPj")+"rice.ec860ad6.jpg";var ae;ae=i("jh5O7").getBundleURL("gDgPj")+"cranberry.4b5f5944.jpg";var se;se=i("jh5O7").getBundleURL("gDgPj")+"zucchini.ad7aed07.jpg";var ce;ce=i("jh5O7").getBundleURL("gDgPj")+"aubergine.0be1a226.jpg";var le;le=i("jh5O7").getBundleURL("gDgPj")+"salt.5bf911b0.jpg";var de;de=i("jh5O7").getBundleURL("gDgPj")+"pepper.93e1d229.jpg";var ge;ge=i("jh5O7").getBundleURL("gDgPj")+"sugar.aeede7db.jpg";const oe=[{imageSrc:new URL(l),title:"Cheese"},{imageSrc:new URL(d),title:"Ham"},{imageSrc:new URL(g),title:"Eggs"},{imageSrc:new URL(o),title:"Butter"},{imageSrc:new URL(h),title:"Apples"},{imageSrc:new URL(p),title:"Milk"},{imageSrc:new URL(u),title:"Tomatoes"},{imageSrc:new URL(R),title:"Peppers"},{imageSrc:new URL(m),title:"Cucumbers"},{imageSrc:new URL(j),title:"Broccoli"},{imageSrc:new URL(L),title:"Onion"},{imageSrc:new URL(f),title:"Bacon"},{imageSrc:new URL(S),title:"Cream cheese"},{imageSrc:new URL(H),title:"Sausage"},{imageSrc:new URL(v),title:"Chicken"},{imageSrc:new URL(U),title:"Lemons"},{imageSrc:new URL(b),title:"Ground-meat"},{imageSrc:new URL(_),title:"Beef"},{imageSrc:new URL(w),title:"Potatoes"},{imageSrc:new URL(E),title:"Strawberries"},{imageSrc:new URL(y),title:"Lettuce"},{imageSrc:new URL(A),title:"Pasta"},{imageSrc:new URL(B),title:"Juice"},{imageSrc:new URL(P),title:"Bread"},{imageSrc:new URL(O),title:"Salami"},{imageSrc:new URL(D),title:"Olives"},{imageSrc:new URL(F),title:"Greek feta cheese"},{imageSrc:new URL(C),title:"Mushrooms"},{imageSrc:new URL(x),title:"Tuna"},{imageSrc:new URL(k),title:"Spinach"},{imageSrc:new URL(T),title:"Asparagus"},{imageSrc:new URL(I),title:"Raspberries"},{imageSrc:new URL(M),title:"Blueberries"},{imageSrc:new URL(q),title:"Avocado"},{imageSrc:new URL($),title:"Olive oil"},{imageSrc:new URL(K),title:"Flour"},{imageSrc:new URL(z),title:"Corn"},{imageSrc:new URL(N),title:"Chocolate"},{imageSrc:new URL(G),title:"Banana"},{imageSrc:new URL(J),title:"Carrot"},{imageSrc:new URL(W),title:"Chives"},{imageSrc:new URL(Y),title:"Green peas"},{imageSrc:new URL(Z),title:"Water"},{imageSrc:new URL(Q),title:"Broad beans"},{imageSrc:new URL(V),title:"Orange"},{imageSrc:new URL(X),title:"Garlic"},{imageSrc:new URL(ee),title:"Peanut butter"},{imageSrc:new URL(te),title:"Hazelnuts"},{imageSrc:new URL(ne),title:"Walnuts"},{imageSrc:new URL(ie),title:"Buckwheat groats"},{imageSrc:new URL(re),title:"Rice"},{imageSrc:new URL(ae),title:"Cranberry"},{imageSrc:new URL(se),title:"Zucchini"},{imageSrc:new URL(ce),title:"Aubergine"},{imageSrc:new URL(le),title:"Salt"},{imageSrc:new URL(de),title:"Pepper"},{imageSrc:new URL(ge),title:"Sugar"}];var he=class{constructor(e){this.ref=document.querySelector(".ingredientsGrid"),this.store=e;const t=function(e,t){let n;return(...i)=>{clearTimeout(n),n=setTimeout((()=>{e.apply(this,i)}),t)}}(this.render.bind(this),1e3);window.addEventListener("resize",t),this.memory={}}addIngredient(){const e=this.getUniqueIngredientIndex(),t=document.createElement("div");t.classList.add("image"),t.innerHTML=`\n        <img src='${oe[e].imageSrc}' alt="${oe[e].title}" />\n        <span>${oe[e].title}</span>\n        `,t.addEventListener("click",(()=>{this.store.dispatch((t=>{const n=oe[e].title;return!t.currentRecipe.ingredients.includes(n)&&n&&t.currentRecipe.ingredients.push(n),t}))})),this.ref.appendChild(t)}render(){this.ref.innerHTML="",this.memory={};const e=window.matchMedia("(max-width: 480px)").matches?4:9;for(let t=0;t<e;t++)this.addIngredient()}getUniqueIngredientIndex(){const e=Math.floor(Math.random()*oe.length);return this.memory[e]?this.getUniqueIngredientIndex():(this.memory[e]=!0,e)}};var pe=class{save(e){window.localStorage.setItem("recipes",JSON.stringify(e))}load(){return JSON.parse(window.localStorage.getItem("recipes"))||[]}plugInStore(e){e.onChange((e=>{e.latestRecipes&&e.latestRecipes.length>0&&this.save(e.latestRecipes)}))}};var ue=class{constructor(e={}){this.eventListeners=[],this.state=e}onChange(e){this.eventListeners.push(e)}dispatch(e){this.state=e(this.state),this.eventListeners.forEach((e=>e(this.state)))}};var Re=class{constructor(e){this.apiKey=void 0,e.onChange((e=>{e.token&&this.apiKey!==e.token&&(this.apiKey=e.token)}))}async findRecipesIdsByIngredients(e){if(!this.apiKey)throw new Error("no api key");let t="https://api.spoonacular.com/recipes/findByIngredients";t+=`?apiKey=${this.apiKey}`,t+=`&ingredients=${e.join(",")}`,t+="&includeInstruction=true",t+="&number=1";const n=await fetch(t);return(await n.json()).map((({id:e})=>e))}async findRecipesByIngredients(e){if(!this.apiKey)throw new Error("no api key");let t="https://api.spoonacular.com/recipes/informationBulk";t+=`?ids=${(await this.findRecipesIdsByIngredients(e)).join(",")}`,t+=`&apiKey=${this.apiKey}`;const n=await fetch(t);return(await n.json()).map((({id:e,instructions:t,title:n,image:i,extendedIngredients:r})=>({id:e,title:n,image:i,description:t,ingredients:r.map((({name:e})=>e))}))).filter((({description:e})=>!!e))}};var me=class{constructor(e){this.ref=document.getElementById("tokenInfo"),this.store=e,this.store.onChange((e=>{this.render(e)}))}render(e){if(this.ref.innerHTML="",!e.token){const e=document.createElement("input");e.setAttribute("type","text"),e.setAttribute("placeholder","Type Spoonacular token and press enter"),e.style.width="100%",this.ref.prepend(e),e.addEventListener("keyup",(t=>{"Enter"===t.key&&(this.store.dispatch((t=>({...t,token:e.value}))),e.remove())}))}}};(new s).render();(new c).render();const je=new pe,Le=je.load(),fe=new ue({latestRecipes:Le,currentRecipe:{ingredients:[]}});je.plugInStore(fe);new me(fe).render({token:fe.state.token});const Se=new Re(fe);new he(fe).render(fe.state);new a(fe,(e=>{Se.findRecipesByIngredients(e).then((e=>{fe.dispatch((t=>({...t,latestRecipes:[...t.latestRecipes,e[0]],modal:e[0],currentRecipe:{ingredients:[]}})))}))})).render(fe.state);new class{constructor(e){this.ref=document.querySelector(".latestRecipes"),this.store=e,e.onChange((e=>{e.latestRecipes&&e.latestRecipes.length>0&&this.render(e)}))}render(e){this.currentPage=1,this.ref.style.display="flex",this.ref.style.flexDirection="column",this.ref.style.padding="20px 10px",e.latestRecipes.length>7?this.ref.innerHTML="\n        <h3>Your latest recipes</h3>\n        <div class='recipesListContainer'></div>\n        <div class='paginationContainer'></div>\n        ":this.ref.innerHTML="\n        <h3>Your latest recipes</h3>\n        <div class='recipesListContainer'></div>\n        ";const t=this.ref.querySelector(".recipesListContainer");if(t.style.display="flex",t.style.flexDirection="column",this.#e(e,t),e.latestRecipes.length>7){const n=this.ref.querySelector(".paginationContainer");n.style.display="flex",n.style.justifyContent="space-between",this.#t(e,n,t)}}#e(e,t){t.innerHTML="";const n=document.createElement("ul");t.appendChild(n);for(let t=7*(this.currentPage-1);t<7*this.currentPage&&t<e.latestRecipes.length;t++){const i=document.createElement("li");n.appendChild(i);const r=document.createElement("a");r.innerText=e.latestRecipes[t].title,r.href="#",r.addEventListener("click",(n=>{this.store.dispatch((n=>({...n,modal:e.latestRecipes[t]})))})),i.appendChild(r)}}#t(e,t,n){const i=document.createElement("button");i.setAttribute("type","button"),i.innerHTML='<i class="fas fa-chevron-left"></i>',t.appendChild(i);const r=document.createElement("p");r.style.display="inline",t.appendChild(r);const a=document.createElement("button");a.setAttribute("type","button"),a.innerHTML='<i class="fas fa-chevron-right"></i>',t.appendChild(a),i.addEventListener("click",(t=>{this.currentPage-=1,this.#e(e,n),this.#n(i,a,r,Math.ceil(e.latestRecipes.length/7))})),a.addEventListener("click",(t=>{this.currentPage+=1,this.#e(e,n),this.#n(i,a,r,Math.ceil(e.latestRecipes.length/7))})),this.#n(i,a,r,Math.ceil(e.latestRecipes.length/7))}#n(e,t,n,i){e.disabled=1===this.currentPage,t.disabled=this.currentPage===i,n.innerText=`Page ${this.currentPage} of ${i}`}}(fe).render({latestRecipes:Le});new class{constructor(e){this.ref=document.body,this.store=e,this.isActive=!1,this.store.onChange((e=>{e.modal&&!this.isActive&&(this.render(e.modal),this.isActive=!0),!e.modal&&this.isActive&&(this.#i(),this.isActive=!1)}))}render(e){const t=document.createElement("div");t.className="modal",t.style.display="flex",t.style.flexDirection="column",t.style.padding="20px",this.ref.appendChild(t);const n=document.createElement("h3");n.innerText=e.title,n.style.textAlign="center",n.style.fontSize="35px",t.appendChild(n);const i=document.createElement("p");i.innerHTML=e.description,i.style.textAlign="center",i.style.fontSize="25px",t.appendChild(i);const r=document.createElement("p");r.innerText="Ingredients:",r.style.fontSize="25px",r.style.fontWeight="bold",r.style.textAlign="center",t.appendChild(r);const a=document.createElement("ul");t.appendChild(a);for(let t=0;t<e.ingredients.length;t++){const n=document.createElement("li");n.innerText=e.ingredients[t],n.style.textAlign="center",n.style.fontSize="25px",a.appendChild(n)}const s=document.createElement("button");s.innerHTML='<i class="far fa-times-circle"></i>',s.addEventListener("click",(e=>{this.store.dispatch((({modal:e,...t})=>t))})),t.appendChild(s),setTimeout((()=>{this.ref.querySelector("header").classList.toggle("modalActive"),this.ref.querySelector("main").classList.toggle("modalActive"),this.ref.querySelector("footer").classList.toggle("modalActive"),t.classList.toggle("modalActive")}),100)}#i(){const e=this.ref.querySelector(".modal");this.ref.querySelector("header").classList.toggle("modalActive"),this.ref.querySelector("main").classList.toggle("modalActive"),this.ref.querySelector("footer").classList.toggle("modalActive"),e.classList.toggle("modalActive"),setTimeout((()=>{e.remove()}),500)}}(fe)})();
//# sourceMappingURL=index.ec645b59.js.map
