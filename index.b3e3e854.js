var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},n=e.parcelRequiredc51;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){i[e]=t},e.parcelRequiredc51=n);var r,a=class{constructor(e,t){this.ref=document.getElementById("ingredientsList"),this.store=e,this.onSubmit=t,e.onChange((e=>{this.render(e)}))}addNewListElement(e){const t=document.createElement("li");t.innerText=e,t.id=e,t.classList.add("listElement"),this.list.appendChild(t);const i=document.createElement("button");i.setAttribute("type","button"),t.appendChild(i);const n=document.createElement("i");i.appendChild(n),i.classList.add("removeButton"),n.classList.add("fas"),n.classList.add("fa-backspace");i.addEventListener("click",(()=>{this.store.dispatch((t=>t={...t,currentRecipe:{...t.currentRecipe,ingredients:t.currentRecipe.ingredients.filter((t=>t!==e))}}))}))}renderInput(e){const t=document.createElement("input");t.setAttribute("type","text"),t.setAttribute("placeholder","Type ingredient and press enter"),this.ref.appendChild(t),t.classList.add("addIngredient");t.addEventListener("keyup",(i=>{if("Enter"===i.key){const i=t.value;if(t.value="",e.currentRecipe.ingredients.includes(i))return;this.addNewListElement(t.value),this.store.dispatch((e=>(e.currentRecipe.ingredients.push(i),e)))}}))}renderList(e){this.list=document.createElement("ul"),this.ref.appendChild(this.list),e.forEach((e=>{this.addNewListElement(e)}))}renderSubmitButton(e){const t=document.createElement("button");t.setAttribute("type","button"),t.innerText="Submit",t.classList.add("submitButton"),t.disabled=0===e.currentRecipe.ingredients.length||!e.token,this.ref.appendChild(t),t.addEventListener("click",(()=>{this.onSubmit(e.currentRecipe.ingredients)}))}render(e){this.ref.innerHTML="",this.renderInput(e),this.renderList(e.currentRecipe.ingredients),this.renderSubmitButton(e)}};n.register("ivgDF",(function(e,t){var i,n,r,a,s;i=e.exports,n="getBundleURL",r=()=>s,a=e=>s=e,Object.defineProperty(i,n,{get:r,set:a,enumerable:!0,configurable:!0});var l={};function c(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}s=function(e){var t=l[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return c(e[2])}return"/"}(),l[e]=t),t}})),r=n("ivgDF").getBundleURL("l0J8P")+"logo.0481ae2c.webp";var s=class{constructor(){this.ref=document.querySelector("header")}render(e){const t=document.createElement("img");t.id="logo",t.src=new URL(r),t.alt="Logo",this.ref.appendChild(t);const i=document.createElement("h1");i.id="titleText",i.textContent="Choose the ingredients and create a recipe",this.ref.appendChild(i)}};var l=class{constructor(){this.ref=document.querySelector("header")}render(){const e=document.createElement("p");e.textContent=(new Date).toLocaleTimeString(),e.classList.add("timer"),this.ref.appendChild(e),setInterval((()=>{e.textContent=(new Date).toLocaleTimeString()}),1e3)}};var c;c=n("ivgDF").getBundleURL("l0J8P")+"cheese.6e82f45d.jpg";var d;d=n("ivgDF").getBundleURL("l0J8P")+"ham.c935385d.jpg";var g;g=n("ivgDF").getBundleURL("l0J8P")+"eggs.f40cbf6b.jpg";var o;o=n("ivgDF").getBundleURL("l0J8P")+"butter.cf0addc8.jpg";var p;p=n("ivgDF").getBundleURL("l0J8P")+"apple.405778b5.jpg";var u;u=n("ivgDF").getBundleURL("l0J8P")+"milk.993ba511.jpg";var h;h=n("ivgDF").getBundleURL("l0J8P")+"tomatoes.62d28351.jpg";var R;R=n("ivgDF").getBundleURL("l0J8P")+"peppers.fdd5fead.jpg";var m;m=n("ivgDF").getBundleURL("l0J8P")+"cucumbers.23e4bac8.jpg";var v;v=n("ivgDF").getBundleURL("l0J8P")+"broccoli.4c7e045e.jpg";var L;L=n("ivgDF").getBundleURL("l0J8P")+"onion.ab884308.jpg";var f;f=n("ivgDF").getBundleURL("l0J8P")+"bacon.d8fa5414.jpg";var S;S=n("ivgDF").getBundleURL("l0J8P")+"cream-cheese.623e6568.jpg";var H;H=n("ivgDF").getBundleURL("l0J8P")+"sausage.e1a10e50.jpg";var U;U=n("ivgDF").getBundleURL("l0J8P")+"chicken.3ac8721b.jpg";var b;b=n("ivgDF").getBundleURL("l0J8P")+"lemons.d3842b79.jpg";var F;F=n("ivgDF").getBundleURL("l0J8P")+"ground-meat.f691266a.jpg";var _;_=n("ivgDF").getBundleURL("l0J8P")+"beef.355e0d04.jpg";var w;w=n("ivgDF").getBundleURL("l0J8P")+"potatoes.2fe8e395.jpg";var E;E=n("ivgDF").getBundleURL("l0J8P")+"strawberries.69519106.jpg";var y;y=n("ivgDF").getBundleURL("l0J8P")+"lettuce.43a65bed.jpg";var A;A=n("ivgDF").getBundleURL("l0J8P")+"pasta.2692088d.jpg";var B;B=n("ivgDF").getBundleURL("l0J8P")+"juice.a4a15d88.jpg";var P;P=n("ivgDF").getBundleURL("l0J8P")+"bread.303ec6b4.jpg";var D;D=n("ivgDF").getBundleURL("l0J8P")+"salami.48e0adef.jpg";var j;j=n("ivgDF").getBundleURL("l0J8P")+"olives.50fd0a44.jpg";var J;J=n("ivgDF").getBundleURL("l0J8P")+"greek-feta-cheese.8d7bbe41.jpg";var C;C=n("ivgDF").getBundleURL("l0J8P")+"mushroom.f8e9f53e.jpg";var x;x=n("ivgDF").getBundleURL("l0J8P")+"tuna.bb6fa052.jpg";var k;k=n("ivgDF").getBundleURL("l0J8P")+"spinach.fc054c9e.jpg";var T;T=n("ivgDF").getBundleURL("l0J8P")+"asparagus.ca6d3c02.jpg";var I;I=n("ivgDF").getBundleURL("l0J8P")+"raspberries.8c55327d.jpg";var M;M=n("ivgDF").getBundleURL("l0J8P")+"blueberries.1c772338.jpg";var q;q=n("ivgDF").getBundleURL("l0J8P")+"avocado.fff7848e.jpg";var $;$=n("ivgDF").getBundleURL("l0J8P")+"olive-oil.894ae0c7.jpg";var O;O=n("ivgDF").getBundleURL("l0J8P")+"flour.d52a0507.jpg";var K;K=n("ivgDF").getBundleURL("l0J8P")+"corn.31d41578.jpg";var z;z=n("ivgDF").getBundleURL("l0J8P")+"chocolate.ad8589a1.jpg";var N;N=n("ivgDF").getBundleURL("l0J8P")+"banana.788f103f.jpg";var G;G=n("ivgDF").getBundleURL("l0J8P")+"carrot.6fc4ce1b.jpg";var W;W=n("ivgDF").getBundleURL("l0J8P")+"chives.4e4d4fe8.jpg";var Y;Y=n("ivgDF").getBundleURL("l0J8P")+"peas.a9268dbd.jpg";var Z;Z=n("ivgDF").getBundleURL("l0J8P")+"water.82cb9002.jpg";var Q;Q=n("ivgDF").getBundleURL("l0J8P")+"broad-beans.a943ac62.jpg";var V;V=n("ivgDF").getBundleURL("l0J8P")+"orange.2ec3961d.jpg";var X;X=n("ivgDF").getBundleURL("l0J8P")+"garlic.7c77291b.jpg";var ee;ee=n("ivgDF").getBundleURL("l0J8P")+"peanut-butter.9a81f23a.jpg";var te;te=n("ivgDF").getBundleURL("l0J8P")+"hazelnuts.78e0774c.jpg";var ie;ie=n("ivgDF").getBundleURL("l0J8P")+"walnuts.9737ce8f.jpg";var ne;ne=n("ivgDF").getBundleURL("l0J8P")+"buckwheat.8ff0f008.jpg";var re;re=n("ivgDF").getBundleURL("l0J8P")+"rice.ec860ad6.jpg";var ae;ae=n("ivgDF").getBundleURL("l0J8P")+"cranberry.4b5f5944.jpg";var se;se=n("ivgDF").getBundleURL("l0J8P")+"zucchini.ad7aed07.jpg";var le;le=n("ivgDF").getBundleURL("l0J8P")+"aubergine.0be1a226.jpg";var ce;ce=n("ivgDF").getBundleURL("l0J8P")+"salt.5bf911b0.jpg";var de;de=n("ivgDF").getBundleURL("l0J8P")+"pepper.93e1d229.jpg";var ge;ge=n("ivgDF").getBundleURL("l0J8P")+"sugar.aeede7db.jpg";const oe=[{imageSrc:new URL(c),title:"Cheese"},{imageSrc:new URL(d),title:"Ham"},{imageSrc:new URL(g),title:"Eggs"},{imageSrc:new URL(o),title:"Butter"},{imageSrc:new URL(p),title:"Apples"},{imageSrc:new URL(u),title:"Milk"},{imageSrc:new URL(h),title:"Tomatoes"},{imageSrc:new URL(R),title:"Peppers"},{imageSrc:new URL(m),title:"Cucumbers"},{imageSrc:new URL(v),title:"Broccoli"},{imageSrc:new URL(L),title:"Onion"},{imageSrc:new URL(f),title:"Bacon"},{imageSrc:new URL(S),title:"Cream cheese"},{imageSrc:new URL(H),title:"Sausage"},{imageSrc:new URL(U),title:"Chicken"},{imageSrc:new URL(b),title:"Lemons"},{imageSrc:new URL(F),title:"Ground-meat"},{imageSrc:new URL(_),title:"Beef"},{imageSrc:new URL(w),title:"Potatoes"},{imageSrc:new URL(E),title:"Strawberries"},{imageSrc:new URL(y),title:"Lettuce"},{imageSrc:new URL(A),title:"Pasta"},{imageSrc:new URL(B),title:"Juice"},{imageSrc:new URL(P),title:"Bread"},{imageSrc:new URL(D),title:"Salami"},{imageSrc:new URL(j),title:"Olives"},{imageSrc:new URL(J),title:"Greek feta cheese"},{imageSrc:new URL(C),title:"Mushrooms"},{imageSrc:new URL(x),title:"Tuna"},{imageSrc:new URL(k),title:"Spinach"},{imageSrc:new URL(T),title:"Asparagus"},{imageSrc:new URL(I),title:"Raspberries"},{imageSrc:new URL(M),title:"Blueberries"},{imageSrc:new URL(q),title:"Avocado"},{imageSrc:new URL($),title:"Olive oil"},{imageSrc:new URL(O),title:"Flour"},{imageSrc:new URL(K),title:"Corn"},{imageSrc:new URL(z),title:"Chocolate"},{imageSrc:new URL(N),title:"Banana"},{imageSrc:new URL(G),title:"Carrot"},{imageSrc:new URL(W),title:"Chives"},{imageSrc:new URL(Y),title:"Green peas"},{imageSrc:new URL(Z),title:"Water"},{imageSrc:new URL(Q),title:"Broad beans"},{imageSrc:new URL(V),title:"Orange"},{imageSrc:new URL(X),title:"Garlic"},{imageSrc:new URL(ee),title:"Peanut butter"},{imageSrc:new URL(te),title:"Hazelnuts"},{imageSrc:new URL(ie),title:"Walnuts"},{imageSrc:new URL(ne),title:"Buckwheat groats"},{imageSrc:new URL(re),title:"Rice"},{imageSrc:new URL(ae),title:"Cranberry"},{imageSrc:new URL(se),title:"Zucchini"},{imageSrc:new URL(le),title:"Aubergine"},{imageSrc:new URL(ce),title:"Salt"},{imageSrc:new URL(de),title:"Pepper"},{imageSrc:new URL(ge),title:"Sugar"}];var pe=class{constructor(e){this.ref=document.querySelector(".ingredientsGrid"),this.store=e;const t=function(e,t){let i;return(...n)=>{clearTimeout(i),i=setTimeout((()=>{e.apply(this,n)}),t)}}(this.render.bind(this),1e3);window.addEventListener("resize",t),this.memory={}}addIngredient(){const e=this.getUniqueIngredientIndex(),t=document.createElement("div");t.classList.add("image"),t.innerHTML=`\n        <img src='${oe[e].imageSrc}' alt="${oe[e].title}" />\n        <span>${oe[e].title}</span>\n        `,t.addEventListener("click",(()=>{this.store.dispatch((t=>{const i=oe[e].title;return!t.currentRecipe.ingredients.includes(i)&&i&&t.currentRecipe.ingredients.push(i),t}))})),this.ref.appendChild(t)}render(){this.ref.innerHTML="",this.memory={};const e=window.matchMedia("(max-width: 480px)").matches?4:9;for(let t=0;t<e;t++)this.addIngredient()}getUniqueIngredientIndex(){const e=Math.floor(Math.random()*oe.length);return this.memory[e]?this.getUniqueIngredientIndex():(this.memory[e]=!0,e)}};var ue=class{save(e){window.localStorage.setItem("recipes",JSON.stringify(e))}load(){return JSON.parse(window.localStorage.getItem("recipes"))||[]}plugInStore(e){e.onChange((e=>{e.latestRecipes&&e.latestRecipes.length>0&&this.save(e.latestRecipes)}))}};var he=class{constructor(e={}){this.eventListeners=[],this.state=e}onChange(e){this.eventListeners.push(e)}dispatch(e){this.state=e(this.state),this.eventListeners.forEach((e=>e(this.state)))}};var Re=class{constructor(e){this.apiKey=void 0,e.onChange((e=>{e.token&&this.apiKey!==e.token&&(this.apiKey=e.token)}))}async findRecipesIdsByIngredients(e){if(!this.apiKey)throw new Error("no api key");let t="https://api.spoonacular.com/recipes/findByIngredients";t+=`?apiKey=${this.apiKey}`,t+=`&ingredients=${e.join(",")}`,t+="&includeInstruction=true",t+="&number=1";const i=await fetch(t);return(await i.json()).map((({id:e})=>e))}async findRecipesByIngredients(e){if(!this.apiKey)throw new Error("no api key");let t="https://api.spoonacular.com/recipes/informationBulk";t+=`?ids=${(await this.findRecipesIdsByIngredients(e)).join(",")}`,t+=`&apiKey=${this.apiKey}`;const i=await fetch(t);return(await i.json()).map((({id:e,instructions:t,title:i,image:n,extendedIngredients:r})=>({id:e,title:i,image:n,description:t,ingredients:r.map((({name:e})=>e))}))).filter((({description:e})=>!!e))}};var me=class{constructor(e){this.ref=document.getElementById("tokenInfo"),this.store=e,this.store.onChange((e=>{this.render(e)}))}render(e){if(this.ref.innerHTML="",!e.token){const e=document.createElement("input");e.setAttribute("type","text"),e.setAttribute("placeholder","Type Spoonacular token and press enter"),e.style.width="100%",this.ref.prepend(e),e.addEventListener("keyup",(t=>{"Enter"===t.key&&(this.store.dispatch((t=>({...t,token:e.value}))),e.remove())}))}}};(new s).render();(new l).render();const ve=new ue,Le=ve.load(),fe=new he({latestRecipes:Le,currentRecipe:{ingredients:[]}});ve.plugInStore(fe);new me(fe).render({token:fe.state.token});const Se=new Re(fe);new pe(fe).render(fe.state);new a(fe,(e=>{Se.findRecipesByIngredients(e).then((e=>{fe.dispatch((t=>({...t,latestRecipes:[...t.latestRecipes,e[0]],modal:e[0],currentRecipe:{ingredients:[]}})))}))})).render(fe.state);new class{constructor(e){this.ref=document.querySelector(".latestRecipes"),this.store=e,e.onChange((e=>{e.latestRecipes&&e.latestRecipes.length>0&&this.render(e)}))}render(e){this.currentPage=1,this.ref.style.display="flex",this.ref.style.flexDirection="column",this.ref.style.padding="20px 10px",e.latestRecipes.length>7?this.ref.innerHTML="\n        <h3>Your latest recipes</h3>\n        <div class='recipesListContainer'></div>\n        <div class='paginationContainer'></div>\n        ":this.ref.innerHTML="\n        <h3>Your latest recipes</h3>\n        <div class='recipesListContainer'></div>\n        ";const t=this.ref.querySelector(".recipesListContainer");if(t.style.display="flex",t.style.flexDirection="column",this.#e(e,t),e.latestRecipes.length>7){const i=this.ref.querySelector(".paginationContainer");i.style.display="flex",i.style.justifyContent="space-between",this.#t(e,i,t)}}#e(e,t){t.innerHTML="";const i=document.createElement("ul");t.appendChild(i);for(let t=7*(this.currentPage-1);t<7*this.currentPage&&t<e.latestRecipes.length;t++){const n=document.createElement("li");i.appendChild(n);const r=document.createElement("a");r.innerText=e.latestRecipes[t].title,r.href="#",r.addEventListener("click",(i=>{this.store.dispatch((i=>({...i,modal:e.latestRecipes[t]})))})),n.appendChild(r)}}#t(e,t,i){const n=document.createElement("button");n.setAttribute("type","button"),n.innerHTML='<i class="fas fa-chevron-left"></i>',t.appendChild(n);const r=document.createElement("p");r.style.display="inline",t.appendChild(r);const a=document.createElement("button");a.setAttribute("type","button"),a.innerHTML='<i class="fas fa-chevron-right"></i>',t.appendChild(a),n.addEventListener("click",(t=>{this.currentPage-=1,this.#e(e,i),this.#i(n,a,r,Math.ceil(e.latestRecipes.length/7))})),a.addEventListener("click",(t=>{this.currentPage+=1,this.#e(e,i),this.#i(n,a,r,Math.ceil(e.latestRecipes.length/7))})),this.#i(n,a,r,Math.ceil(e.latestRecipes.length/7))}#i(e,t,i,n){e.disabled=1===this.currentPage,t.disabled=this.currentPage===n,i.innerText=`Page ${this.currentPage} of ${n}`}}(fe).render({latestRecipes:Le});new class{constructor(e){this.ref=document.body,this.store=e,this.isActive=!1,this.store.onChange((e=>{e.modal&&!this.isActive&&(this.render(e.modal),this.isActive=!0),!e.modal&&this.isActive&&(this.#n(),this.isActive=!1)}))}render(e){const t=document.createElement("div");t.className="modal",t.style.display="flex",t.style.flexDirection="column",t.style.padding="20px",this.ref.appendChild(t);const i=document.createElement("h3");i.innerText=e.title,i.style.textAlign="center",i.style.fontSize="35px",t.appendChild(i);const n=document.createElement("p");n.innerHTML=e.description,n.style.textAlign="center",n.style.fontSize="25px",t.appendChild(n);const r=document.createElement("p");r.innerText="Ingredients:",r.style.fontSize="25px",r.style.fontWeight="bold",r.style.textAlign="center",t.appendChild(r);const a=document.createElement("ul");t.appendChild(a);for(let t=0;t<e.ingredients.length;t++){const i=document.createElement("li");i.innerText=e.ingredients[t],i.style.textAlign="center",i.style.fontSize="25px",a.appendChild(i)}const s=document.createElement("button");s.innerHTML='<i class="far fa-times-circle"></i>',s.addEventListener("click",(e=>{this.store.dispatch((({modal:e,...t})=>t))})),t.appendChild(s),setTimeout((()=>{this.ref.querySelector("header").classList.toggle("modalActive"),this.ref.querySelector("main").classList.toggle("modalActive"),this.ref.querySelector("footer").classList.toggle("modalActive"),t.classList.toggle("modalActive")}),100)}#n(){const e=this.ref.querySelector(".modal");this.ref.querySelector("header").classList.toggle("modalActive"),this.ref.querySelector("main").classList.toggle("modalActive"),this.ref.querySelector("footer").classList.toggle("modalActive"),e.classList.toggle("modalActive"),setTimeout((()=>{e.remove()}),500)}}(fe);
//# sourceMappingURL=index.b3e3e854.js.map
